(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dd96b72"],{"010e":function(t,e,a){"use strict";var n=a("9dba"),s=a.n(n);s.a},"1bbe":function(t,e,a){"use strict";var n=a("7df8"),s=a.n(n);s.a},"28bc":function(t,e,a){"use strict";var n=a("41b2"),s=a.n(n);s.a},"38c6":function(t,e,a){"use strict";var n=a("f673"),s=a.n(n);s.a},"41b2":function(t,e,a){},"5c24":function(t,e,a){"use strict";var n=a("c454"),s=a.n(n);s.a},6433:function(t,e,a){},"67d9":function(t,e,a){},"6daa":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail"},[a("div",{staticClass:"content"},[a("div",{staticClass:"left"},[a("p",{staticClass:"city"},[t._v(t._s(t.departStation))]),a("p",{staticClass:"time"},[t._v(t._s(t.departTimeStr))]),a("p",{staticClass:"date"},[t._v(t._s(t.departDateStr))])]),a("div",{staticClass:"middle"},[a("p",{staticClass:"train-name"},[t._v(t._s(t.trainNumber))]),a("p",{staticClass:"train-time"},[t._v("耗时"+t._s(t.durationStr))])]),a("div",{staticClass:"right"},[a("p",{staticClass:"city"},[t._v(t._s(t.arriveStation))]),a("p",{staticClass:"time"},[t._v(t._s(t.arriveTimeStr))]),a("p",{staticClass:"date"},[t._v(t._s(t.arriveDateStr))])])])])},s=[],i=(a("a9e3"),a("5a0c")),r=a.n(i),c=(a("a471"),{name:"Detail",props:{departDate:{type:Number,required:!0},arriveDate:{type:Number,required:!0},departTimeStr:{type:String},arriveTimeStr:{type:String},trainNumber:{type:String,required:!0},departStation:{type:String,required:!0},arriveStation:{type:String,required:!0},durationStr:{type:String}},data:function(){return{}},computed:{departDateStr:function(){return this.format(this.departDate)},arriveDateStr:function(){return this.format(this.arriveDate)}},methods:{format:function(t){var e=r()(t);return e.format("MM-DD")+""+e.locale("zh-cn").format("ddd")}}}),o=c,u=(a("28bc"),a("2877")),l=Object(u["a"])(o,n,s,!1,null,"695b0cab",null);e["a"]=l.exports},"7bc8":function(t,e,a){},"7df8":function(t,e,a){},8520:function(t,e,a){"use strict";var n=a("67d9"),s=a.n(n);s.a},"99c7":function(t,e,a){"use strict";var n=a("7bc8"),s=a.n(n);s.a},"9dba":function(t,e,a){},c454:function(t,e,a){},d3fb:function(t,e,a){},e394:function(t,e,a){"use strict";var n=a("d3fb"),s=a.n(n);s.a},f673:function(t,e,a){},fecb:function(t,e,a){"use strict";a.r(e);var n,s,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[a("div",{staticClass:"header-wrapper"},[a("headers",{attrs:{title:"订单填写","on-back":t.onBack}})],1),a("div",{staticClass:"detail-wrapper"},[a("detail",{attrs:{"arrive-date":t.arriveDate,"arrive-station":t.arriveStation,"arrive-time-str":t.arriveTimeStr,"depart-date":t.departDate,"depart-station":t.departStation,"depart-time-str":t.departTimeStr,"duration-str":t.durationStr,"train-number":t.trainNumber}})],1),a("ticket",{staticClass:"top",attrs:{price:t.price,type:t.seatType}}),a("passengers",{attrs:{passengers:t.passengers,"create-adult":t.ACTION_SET_CREATE_ADULT,"create-child":t.ACTION_SET_CREATE_CHILD,"on-remove":t.ACTION_REMOVE_PASSENGER,"on-update":t.ACTION_UPDATE_PASSENGER,"show-gender-menu":t.ACTION_SHOW_GENDER_MENU,"show-ticket-type-menu":t.ACTION_SHOW_TICKET_TYPE_MENU,"show-follow-adult-menu":t.ACTION_SHOW_FOLLOW_ADULT_MENU}}),t.passengers.length>0?a("choose",{attrs:{passengers:t.passengers,"update-passenger":t.ACTION_UPDATE_PASSENGER}}):t._e(),a("account",{attrs:{length:t.passengers.length,price:t.price}}),t.menu?a("menus",{attrs:{show:t.isMenuVisible,options:t.menu.options,"on-press":t.menu.onPress,"hide-menu":t.ACTION_HIDE_MENU}}):t._e()],1)},r=[],c=(a("d3b7"),a("25f0"),a("5530")),o=a("2f62"),u=a("5a0c"),l=a.n(u),d=a("c909"),p=a.n(d),_=a("6daa"),T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ticket"},[a("div",{staticClass:"label"},[t._v("坐席")]),a("span",{staticClass:"ticket-type"},[t._v(t._s(t.type))]),a("span",{staticClass:"ticket-price"},[t._v(t._s(t.price))])])},v=[],f={name:"Ticket",props:["price","type"],data:function(){return{}},methods:{}},m=f,h=(a("1bbe"),a("2877")),S=Object(h["a"])(m,T,v,!1,null,"46495b98",null),C=S.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"passengers"},[a("ul",t._l(t.passengers,(function(e){return a("passenger",{key:e.id,attrs:{id:e.id,name:e.name,"follow-adult":e.followAdult,"ticket-type":e.ticketType,"licence-no":e.licenceNo,gender:e.gender,birthday:e.birthday,"on-remove":t.onRemove,"on-update":t.onUpdate,"show-gender-menu":t.showGenderMenu,"show-follow-adult-menu":t.showFollowAdultMenu,"show-ticket-type-menu":t.showTicketTypeMenu}})})),1),a("section",{staticClass:"add"},[a("div",{staticClass:"adult",on:{click:t.createAdult}},[t._v("添加成人")]),a("div",{staticClass:"adult",on:{click:t.createChild}},[t._v("添加儿童")])])])},A=[],N=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("li",{staticClass:"passenger"},[n("i",{staticClass:"delete",on:{click:function(t){return e.onRemove(e.id)}}},[e._v(" - ")]),n("ol",{staticClass:"items"},[n("li",{staticClass:"item"},[n("label",{staticClass:"label name",attrs:{for:"name"}},[e._v("姓名")]),n("input",{staticClass:"input name",attrs:{id:"name",type:"text",placeholder:"乘客姓名"},domProps:{value:e.name},on:{input:e.change}}),n("label",{staticClass:"ticket-type",on:{click:function(t){return e.showTicketTypeMenu(e.id)}}},[e._v(" "+e._s(e.isAdult?"成人票":"儿童票")+" ")])]),e.isAdult?n("li",{staticClass:"item"},[n("label",{staticClass:"label licenceNo",attrs:{for:"licenceNo"}},[e._v("身份证")]),n("input",{staticClass:"input licenceNo",attrs:{id:"licenceNo",type:"text",placeholder:"证件号码"},domProps:{value:e.licenceNo},on:{input:function(a){return e.onUpdate({id:t.id,data:{licenceNo:a.target.value}})}}})]):e._e(),e.isAdult?e._e():n("li",{staticClass:"item arrow"},[n("label",{staticClass:"label gender",attrs:{for:"gender"}},[e._v("性别")]),n("input",{staticClass:"input gender",attrs:{id:"gender",type:"text",placeholder:"请选择",readonly:""},domProps:{value:"male"===e.gender?"男":"female"===e.gender?"女":""},on:{click:function(t){return e.showGenderMenu(e.id)}}})]),e.isAdult?e._e():n("li",{staticClass:"item"},[n("label",{staticClass:"label birthday",attrs:{for:"birthday"}},[e._v("生日")]),n("input",{staticClass:"input birthday",attrs:{id:"birthday",type:"text",placeholder:"生日 （如19961010）"},domProps:{value:e.birthday},on:{input:function(a){return e.onUpdate({id:t.id,data:{birthday:a.target.value}})}}})]),e.isAdult?e._e():n("li",{staticClass:"item arrow"},[n("label",{staticClass:"label followAdult",attrs:{for:"followAdult"}},[e._v("同行成人")]),n("input",{staticClass:"input followAdult",attrs:{id:"followAdult",type:"text",readonly:""},domProps:{value:e.followAdult.name},on:{click:function(t){return e.showFollowAdultMenu(e.id)}}})])])])},b=[],I={name:"Passenger",props:["id","name","followAdult","ticketType","licenceNo","gender","birthday","onRemove","onUpdate","showGenderMenu","showFollowAdultMenu","showTicketTypeMenu"],data:function(){return{}},computed:{isAdult:function(){return"adult"===this.ticketType}},methods:{change:function(t){var e=t.target.value;this.onUpdate({id:this.id,data:{name:e}})}}},O=I,g=(a("8520"),Object(h["a"])(O,N,b,!1,null,"7d05d94e",null)),y=g.exports,w={name:"Passengers",props:["createAdult","createChild","passengers","onRemove","onUpdate","showGenderMenu","showFollowAdultMenu","showTicketTypeMenu"],components:{Passenger:y},data:function(){return{}},methods:{}},D=w,R=(a("ff36"),Object(h["a"])(D,E,A,!1,null,"bdbc46b6",null)),M=R.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.show?a("div",{staticClass:"menu-mask",on:{click:t.hideMenu}}):t._e(),a("div",{staticClass:"menu",class:{show:t.show}},[a("div",{staticClass:"menu-title"},[t.options?a("ul",t._l(t.options,(function(e){return a("menu-item",t._b({key:e.value,attrs:{"on-press":t.onPress}},"menu-item",e,!1))})),1):t._e()])])])},P=[],U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{class:{active:t.active},on:{click:function(e){return t.onPress(t.value)}}},[t._v(" "+t._s(t.title)+" ")])},x=[],H={name:"MenuItem",props:["title","onPress","value","active"],data:function(){return{}},methods:{}},j=H,L=(a("5c24"),Object(h["a"])(j,U,x,!1,null,"39cb6f1c",null)),G=L.exports,$={name:"Menu",components:{MenuItem:G},props:["show","options","onPress","hideMenu"],data:function(){return{}},methods:{}},V=$,F=(a("e394"),Object(h["a"])(V,k,P,!1,null,"517c927a",null)),W=F.exports,Y=(a("d81d"),{name:"Choose",props:["passengers","updatePassenger"],data:function(){return{}},methods:{renderSeat:function(t){var e=this,a=this.$createElement;return this.passengers.map((function(n){return a("p",{class:"seat ".concat(n.seat===t?"active":""),key:n.id,attrs:{"data-text":t},on:{click:function(){return e.updatePassenger({id:n.id,data:{seat:t}})}}},[""])}))}},render:function(){var t=arguments[0];return t("div",{class:"choose"},[t("p",{class:"tip"},["在线选座"]),t("div",{class:"container"},[t("div",{class:"seats"},[t("div",["窗"]),t("div",[this.renderSeat("A")]),t("div",[this.renderSeat("B")]),t("div",[this.renderSeat("C")]),t("div",["过道"]),t("div",[this.renderSeat("D")]),t("div",[this.renderSeat("F")]),t("div",["窗"])])])])}}),q=Y,B=(a("010e"),Object(h["a"])(q,n,s,!1,null,"174edfe0",null)),J=B.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account"},[a("div",{staticClass:"price",class:{expanded:t.expanded},on:{click:t.expand}},[a("div",{staticClass:"money"},[t._v(t._s(t.length*t.price))]),a("div",{staticClass:"amount"},[t._v("支付金额")])]),a("div",{staticClass:"button"},[t._v("提交订单")]),a("div",{staticClass:"layer",class:{hidden:!t.expanded},on:{click:t.expand}}),a("div",{staticClass:"detail",class:{hidden:!t.expanded}},[a("div",{staticClass:"title"},[t._v("金额详情")]),a("ul",[a("li",[a("span",[t._v("火车票")]),a("span",[t._v("￥"+t._s(t.price))]),a("span",[t._v("×"+t._s(t.length))])])])])])},z=[],Q={name:"Account",props:["price","length"],data:function(){return{expanded:!1}},methods:{expand:function(){this.expanded=!this.expanded}}},X=Q,Z=(a("38c6"),Object(h["a"])(X,K,z,!1,null,"63e6ae91",null)),tt=Z.exports,et=a("a960"),at=Object(o["a"])("order"),nt=at.mapState,st=at.mapActions,it=Object(o["a"])("ticket"),rt=it.mapState,ct={name:"Index",components:{Headers:et["a"],Detail:_["a"],Ticket:C,Passengers:M,Menus:W,Choose:J,Account:tt},data:function(){return{}},mounted:function(){var t=this.$route.query.type;this.ACTION_SET_TRAIN_NUMBER(this.tNumber),this.ACTION_SET_DEPART_STATION(this.dStation),this.ACTION_SET_ARRIVE_STATION(this.aStation),this.ACTION_SET_DEPART_DATE(l()(this.date).valueOf()),this.ACTION_SET_SEAT_TYPE(t),this.ACTION_SET_SEARCH_PARSED(!0)},watch:{searchParsed:function(t){if(t){var e=new p.a("http://www.mtxc.xyz/rest/order").setSearch("dStation",this.departStation).setSearch("aStation",this.arriveStation).setSearch("type",this.seatType).setSearch("date",l()(this.departDate).format("YYYY-MM-DD")).toString();this.ACTION_FETCH_INITIAL(e)}}},computed:Object(c["a"])({},rt({date:function(t){return t.departDate},dStation:function(t){return t.departStation},aStation:function(t){return t.arriveStation},tNumber:function(t){return t.trainNumber}}),{},nt({trainNumber:function(t){return t.trainNumber},departStation:function(t){return t.departStation},arriveStation:function(t){return t.arriveStation},seatType:function(t){return t.seatType},departDate:function(t){return t.departDate},arriveDate:function(t){return t.arriveDate},departTimeStr:function(t){return t.departTimeStr},arriveTimeStr:function(t){return t.arriveTimeStr},durationStr:function(t){return t.durationStr},price:function(t){return t.price},passengers:function(t){return t.passengers},menu:function(t){return t.menu},isMenuVisible:function(t){return t.isMenuVisible},searchParsed:function(t){return t.searchParsed}})),methods:Object(c["a"])({},st(["ACTION_SET_TRAIN_NUMBER","ACTION_SET_DEPART_STATION","ACTION_SET_ARRIVE_STATION","ACTION_SET_SEAT_TYPE","ACTION_SET_DEPART_DATE","ACTION_SET_ARRIVE_DATE","ACTION_SET_DEPART_TIME_STR","ACTION_SET_ARRIVE_TIME_STR","ACTION_SET_DURATION_STR","ACTION_SET_PRICE","ACTION_SET_PASSENGERS","ACTION_SET_MENU","ACTION_SET_IS_MENU_VISIBLE","ACTION_SET_SEARCH_PARSED","ACTION_FETCH_INITIAL","ACTION_SET_CREATE_ADULT","ACTION_SET_CREATE_CHILD","ACTION_REMOVE_PASSENGER","ACTION_UPDATE_PASSENGER","ACTION_SHOW_MENU","ACTION_HIDE_MENU","ACTION_SHOW_GENDER_MENU","ACTION_SHOW_FOLLOW_ADULT_MENU","ACTION_SHOW_TICKET_TYPE_MENU"]),{onBack:function(){this.$router.back()}})},ot=ct,ut=(a("99c7"),Object(h["a"])(ot,i,r,!1,null,"224dfadd",null));e["default"]=ut.exports},ff36:function(t,e,a){"use strict";var n=a("6433"),s=a.n(n);s.a}}]);
